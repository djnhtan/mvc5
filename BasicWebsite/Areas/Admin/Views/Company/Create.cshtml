@model BasicWebsite.Models.CompanyModel

@{
    ViewBag.Title = "Create";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
    ViewBag.MenuActive = "Company";
}

<h2>Create</h2>
<hr />
@using (Html.BeginForm()) 
{
    @Html.AntiForgeryToken()
    
    @Html.ValidationSummary(true)

    <div class="row">
        @Html.LabelFor(model => model.Name, new { @class = "col-sm-2" })
        <div class="col-sm-4">
            @Html.TextBoxFor(model => model.Name, new { @class = "form-control  input-sm" })
            <label for="Name" class="error"></label>
        </div>
    </div>

    <div class="row">
        @Html.LabelFor(model => model.StockId, new { @class = "col-sm-2" })
        <div class="col-sm-4">
            @Html.TextBoxFor(model => model.StockId, new { @class = "form-control  input-sm" })
            <label for="StockId" class="error"></label>
        </div>
    </div>

    <div class="row">
        @Html.LabelFor(model => model.Founded, new { @class = "col-sm-2" })
        <div class="col-sm-4">
            @Html.TextBoxFor(model => model.Founded, new { @class = "form-control  input-sm" })
            <label for="Founded" class="error"></label>
        </div>
    </div>

    <div class="row">
        @Html.LabelFor(model => model.Director, new { @class = "col-sm-2" })
        <div class="col-sm-4">
            @Html.TextBoxFor(model => model.Director, new { @class = "form-control  input-sm" })
            <label for="Director" class="error"></label>
        </div>
    </div>

    <div class="row">
        @Html.LabelFor(model => model.Headquarters, new { @class = "col-sm-2" })
        <div class="col-sm-4">
            @Html.TextBoxFor(model => model.Headquarters, new { @class = "form-control input-sm" })
            <label for="Headquarters" class="error"></label>
        </div>
    </div>

    <div class="row">
        @Html.LabelFor(model => model.Country, new { @class = "col-sm-2" })
        <div class="col-sm-4">
            <span class="small" id="CountryText"></span>
            @Html.HiddenFor(model => model.Country)
        </div>
    </div>
    <br />
    <div class="row">
        @Html.LabelFor(model => model.Description, new { @class = "col-sm-2" })
        <div class="col-sm-6">
            @Html.TextAreaFor(model => model.Description, new { @class = "form-control", @rows="4" })
            <label for="Description" class="error"></label>
        </div>
    </div>

    <div class="row">
        @Html.LabelFor(model => model.Tags, new { @class = "col-sm-2" })
        <div class="col-sm-6">
            @Html.TextAreaFor(model => model.Tags, new { @class = "form-control", @rows = "4" })
            <label for="Tags" class="error"></label>
        </div>
    </div>

    <div class="row">
        @Html.LabelFor(model => model.IsActive, new { @class = "col-sm-2" })
        <div class="col-sm-4">
            @Html.CheckBoxFor(model => model.IsActive, new { @class = "checkbox" })
            <label for="IsActive" class="error"></label>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-offset-2 col-sm-8">
            <input type="submit" value="Create" class="btn btn-default" />
        </div>
    </div>
}

@section scripts{
    <script src="~/Scripts/jquery.validate.js"></script>
    <script>
        $(document).ready(function () {
            $('#Headquarters').on('change', function (e) {
                var s = $(this).val();
                if (s.length > 0) {
                    if (s.indexOf(",") >= 0) {
                        var arr = s.split(",");
                        var arrLength = arr.length;
                        var country = arr[arrLength-1];
                        $('#CountryText').html(country);
                    } else {
                        $('#CountryText').html(s);
                    }
                }
                else {
                    $('#CountryText').html("");
                }
                $('#Country').val($('#CountryText').html())
            });
        });
    </script>
}
